{% extends 'nav.html.twig' %}

{% block title %}Creer un element{% endblock %}

 {% block javascripts %}
     <script  src="{{ asset('/assets/js/datepicker/moment.min.js') }}"></script>
     <script  src="{{ asset('/assets/js/datepicker/daterangepicker.js') }}"></script>
     <script  src="{{ asset('/assets/js/custom/picker.js') }}"></script>
 {% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('/assets/css/datepicker/daterangepicker.css') }}" />
    <link rel="stylesheet" href="{{ asset('/assets/css/datepicker/daterangepicker.css') }}" />
    <link rel="stylesheet" href="{{ asset('/assets/css/fileinput/fileinput.min.css') }}" />
    <link rel="stylesheet" href="{{ asset('/assets/css/fileinput/theme/theme.css') }}" />
    <link rel="stylesheet" href="{{ asset('/assets/css/fileinput/fileinput-rtl.min.css') }}" />


    <style>
        .kv-avatar .krajee-default.file-preview-frame,.kv-avatar .krajee-default.file-preview-frame:hover {
            margin: 0;
            padding: 0;
            border: none;
            box-shadow: none;
            text-align: center;
        }
        .kv-avatar {
            display: inline-block;
        }
        .kv-avatar .file-input {
            display: table-cell;
            width: 213px;
        }
        .kv-reqd {
            color: red;
            font-family: monospace;
            font-weight: normal;
        }

        .kv-file-upload{
            display: none;
        }
    </style>


{% endblock %}


{% block content %}


    <div style="margin-top: 1em; margin-bottom: 5em;">
        <ul class="nav nav-tabs md-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="create-tab" data-bs-toggle="tab" data-bs-target="#create" type="button" role="tab" aria-controls="home" aria-selected="true">Creer un element</button>
            </li>
        </ul>
        <div class="tab-content card pt-5" id="myTabContent">
            <div class="tab-pane fade show active" id="create" role="tabpanel" aria-labelledby="create-tab">
                <div class="row" style="margin-top: 1em">

                    <div class="col col-12">

                        {% for message in app.session.flashbag.get('grade_add') %}
                            <div class="alert alert-success alert-dismissible fade show" role="alert">
                                <strong>{{ message }}!</strong>
                                <button type="button" class="btn-close"  data-mdb-dismiss="alert"  aria-label="Close"></button>
                            </div>
                        {% endfor %}

                        {{ form_start(militaireForm) }}

                        {{ form_errors(militaireForm) }}


                        <div class="mb-3">
                            <div class="kv-avatar">
                                <div class="file-loading">
                                    {{ form_widget(militaireForm.mainPicture,{'id':'mainPicture'},{'attr': {'class': ''}}) }}
                                </div>
                            </div>

                            <div id="kv-avatar-errors-2" class="center-block" style="width:800px;display:none"></div>

                            <div class="form-error" style="color: red">
                                {{ form_errors(militaireForm.mainPicture) }}
                            </div>
                        </div>


                        <div class="mb-3">
                            {{ form_label(militaireForm.matricule, '', {'label_attr': {'class': 'intitule_label'}}) }}
                            {{ form_widget(militaireForm.matricule, {'attr': {'class': 'form-control'}}) }}
                            <div class="form-error" style="color: red">
                                {{ form_errors(militaireForm.matricule) }}
                            </div>
                        </div>

                        <div class="mb-3">
                            {{ form_label(militaireForm.nom, '', {'label_attr': {'class': 'intitule_label'}}) }}
                            {{ form_widget(militaireForm.nom, {'attr': {'class': 'form-control'}}) }}
                            <div class="form-error" style="color: red">
                                {{ form_errors(militaireForm.nom) }}
                            </div>
                        </div>

                        <div class="mb-3">
                            {{ form_label(militaireForm.prenoms, '', {'label_attr': {'class': 'intitule_label'}}) }}
                            {{ form_widget(militaireForm.prenoms, {'attr': {'class': 'form-control'}}) }}
                            <div class="form-error" style="color: red">
                                {{ form_errors(militaireForm.prenoms) }}
                            </div>
                        </div>

                        <div class="mb-3">
                            {{ form_label(militaireForm.dateNaissance, '', {'label_attr': {'class': 'intitule_label'}}) }}
                            {{ form_widget(militaireForm.dateNaissance, {'attr': {'class': 'form-control js-datepicker'}}) }}
                            <div class="form-error" style="color: red">
                                {{ form_errors(militaireForm.dateNaissance) }}
                            </div>
                        </div>


                        <div class="mb-3">
                            {{ form_label(militaireForm.sexe,'', {'label_attr': {'class': 'intitule_label'}}) }}
                            {{ form_widget(militaireForm.sexe, {'attr': {'class': 'mdb-select md-form colorful-select dropdown-ins'}}) }}
                            <div class="form-error" style="color: red">
                                {{ form_errors(militaireForm.sexe) }}
                            </div>
                        </div>

                        <div class="mb-3">
                            {{ form_label(militaireForm.groupeSanguin,'', {'label_attr': {'class': 'intitule_label'}}) }}
                            {{ form_widget(militaireForm.groupeSanguin, {'attr': {'class': 'mdb-select md-form colorful-select dropdown-ins'}}) }}
                            <div class="form-error" style="color: red">
                                {{ form_errors(militaireForm.groupeSanguin) }}
                            </div>
                        </div>


                        <div class="mb-3">
                            {{ form_label(militaireForm.taille, '', {'label_attr': {'class': 'intitule_label'}}) }}
                            {{ form_widget(militaireForm.taille, {'attr': {'class': 'form-control'}}) }}
                            <div class="form-error" style="color: red">
                                {{ form_errors(militaireForm.taille) }}
                            </div>
                        </div>

                        <div class="mb-3">
                            {{ form_label(militaireForm.couleurYeux, '', {'label_attr': {'class': 'intitule_label'}}) }}
                            {{ form_widget(militaireForm.couleurYeux, {'attr': {'class': 'form-control'}}) }}
                            <div class="form-error" style="color: red">
                                {{ form_errors(militaireForm.couleurYeux) }}
                            </div>
                        </div>

                        <div class="mb-3">
                            {{ form_label(militaireForm.situationMatri, '', {'label_attr': {'class': 'intitule_label'}}) }}
                            {{ form_widget(militaireForm.situationMatri, {'attr': {'class': 'mdb-select md-form colorful-select dropdown-ins'}}) }}
                            <div class="form-error" style="color: red">
                                {{ form_errors(militaireForm.situationMatri) }}
                            </div>
                        </div>

                        <div class="mb-3">
                            {{ form_label(militaireForm.hasChildren, '', {'label_attr': {'class': 'intitule_label'}}) }}
                            {{ form_widget(militaireForm.hasChildren, {'attr': {'class': 'mdb-select md-form colorful-select dropdown-ins'}}) }}
                            <div class="form-error" style="color: red">
                                {{ form_errors(militaireForm.hasChildren) }}
                            </div>
                        </div>


                        <div class="mb-3">
                            {{ form_label(militaireForm.adresse, '', {'label_attr': {'class': 'intitule_label'}}) }}
                            {{ form_widget(militaireForm.adresse, {'attr': {'class': 'form-control'}}) }}
                            <div class="form-error" style="color: red">
                                {{ form_errors(militaireForm.adresse) }}
                            </div>
                        </div>

                        <div class="mb-3">
                            {{ form_label(militaireForm.telephone, '', {'label_attr': {'class': 'intitule_label'}}) }}
                            {{ form_widget(militaireForm.telephone, {'attr': {'class': 'form-control'}}) }}
                            <div class="form-error" style="color: red">
                                {{ form_errors(militaireForm.telephone) }}
                            </div>
                        </div>

                        <div class="mb-3">
                            {{ form_label(militaireForm.dateIncorp, '', {'label_attr': {'class': 'intitule_label'}}) }}
                            {{ form_widget(militaireForm.dateIncorp, {'attr':{'class': 'form-control js-datepicker'}}) }}
                            <div class="form-error" style="color: red">
                                {{ form_errors(militaireForm.dateIncorp) }}
                            </div>
                        </div>

                        <div class="mb-3">
                            {{ form_label(militaireForm.professionAnt, '', {'label_attr': {'class': 'intitule_label'}}) }}
                            {{ form_widget(militaireForm.professionAnt, {'attr': {'class': 'form-control'}}) }}
                            <div class="form-error" style="color: red">
                                {{ form_errors(militaireForm.professionAnt) }}
                            </div>
                        </div>

                        <div class="mb-3">
                            {{ form_label(militaireForm.grade, '', {'label_attr': {'class': 'intitule_label'}}) }}
                            {{ form_widget(militaireForm.grade, {'attr': {'class': 'mdb-select md-form colorful-select dropdown-ins','searchable':'Rechercher un grade'}}) }}
                            <div class="form-error" style="color: red">
                                {{ form_errors(militaireForm.grade) }}
                            </div>
                        </div>

                        <div class="mb-3">
                            {{ form_label(militaireForm.specialite, '', {'label_attr': {'class': 'intitule_label'}}) }}
                            {{ form_widget(militaireForm.specialite, {'attr': {'class': 'mdb-select md-form colorful-select dropdown-ins','searchable':'Rechercher une specialite'}}) }}
                            <div class="form-error" style="color: red">
                                {{ form_errors(militaireForm.specialite) }}
                            </div>
                        </div>

                        <div class="mb-3">
                            {{ form_label(militaireForm.origineRecrutement, '', {'label_attr': {'class': 'intitule_label'}}) }}
                            {{ form_widget(militaireForm.origineRecrutement, {'attr': {'class': 'mdb-select md-form colorful-select dropdown-ins','searchable':'Rechercher'}}) }}
                            <div class="form-error" style="color: red">
                                {{ form_errors(militaireForm.origineRecrutement) }}
                            </div>
                        </div>

                        <div class="mb-3">
                            <div class="file-loading">
                                {{ form_widget(militaireForm.fichiers,{'id':'attachements'}, {'attr': {'class': ''}}) }}
                            </div>

                            <div id="kv-avatar-errors-2" class="center-block" style="width:800px;display:none"></div>

                            <div class="form-error" style="color: red">
                                {{ form_errors(militaireForm.fichiers) }}
                            </div>
                        </div>


                        <hr>
                        <div class="d-flex justify-content-center">
                            {{ form_row(militaireForm.cancel,{'attr':{'class': 'btn btn-outline-secondary form-btn'}}) }}
                            {{ form_row(militaireForm.submit,{'attr':{'class': 'btn btn-outline-success form-btn'}}) }}
                        </div>

                        {{ form_end(militaireForm) }}

                    </div>

                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block botton_javascripts %}

    <script  src="{{ asset('/assets/js/fileinput/plugins/piexif.js') }}"></script>
    <script  src="{{ asset('/assets/js/fileinput/plugins/sortable.js') }}"></script>
    <script  src="{{ asset('/assets/js/fileinput/fileinput.js') }}"></script>
    <script  src="{{ asset('/assets/js/fileinput/locales/fr.js') }}" type="text/javascript"></script>
    <script  src="{{ asset('/assets/js/fileinput/theme/theme.js') }}"></script>

    <script>

        $("#mainPicture").fileinput({
            language: "fr",
            overwriteInitial: true,
            maxFileSize: 1500,
            showClose: false,
            showCaption: false,
            showBrowse: false,
            browseOnZoneClick: true,
            removeLabel: '',
            removeIcon: '<i class="bi-x-lg"></i>',
            removeTitle: 'Cancel or reset changes',
            elErrorContainer: '#kv-avatar-errors-2',
            msgErrorClass: 'alert alert-block alert-danger',
            // defaultPreviewContent: '<img src="/img/default-avatar-male.png" alt="Your Avatar"><h6 class="text-muted">Click to select</h6>',
            layoutTemplates: {main2: '{preview} '  + ' {remove} {browse}'},
            allowedFileExtensions: ["jpg", "png", "gif","jpeg"]
        });


        $("#attachements").fileinput({

            theme: "explorer",
            language: "fr",
            showUpload: false,
            maxFileSize: 1000000,
            removeFromPreviewOnError: true,
            overwriteInitial: false,
            preferIconicPreview: true, // this will force thumbnails to display icons for following file extensions
            previewFileIcon: '<i class="fas fa-file"></i>',
            initialPreviewAsData: true, // defaults markup
            previewFileIconSettings: { // configure your icon file extensions
                'doc': '<i class="fas fa-file-word text-primary"></i>',
                'xls': '<i class="fas fa-file-excel text-success"></i>',
                'ppt': '<i class="fas fa-file-powerpoint text-danger"></i>',
                'pdf': '<i class="fas fa-file-pdf text-danger"></i>',
                'zip': '<i class="fas fa-file-archive text-muted"></i>',
                'htm': '<i class="fas fa-file-code text-info"></i>',
                'txt': '<i class="fas fa-file-text text-info"></i>',
                'mov': '<i class="fas fa-file-video text-warning"></i>',
                'mp3': '<i class="fas fa-file-audio text-warning"></i>',
                // note for these file types below no extension determination logic
                // has been configured (the keys itself will be used as extensions)
                'jpg': '<i class="fas fa-file-image text-danger"></i>',
                'gif': '<i class="fas fa-file-image text-muted"></i>',
                'png': '<i class="fas fa-file-image text-primary"></i>'
            },
            previewFileExtSettings: { // configure the logic for determining icon file extensions
                'doc': function(ext) {
                    return ext.match(/(doc|docx)$/i);
                },
                'xls': function(ext) {
                    return ext.match(/(xls|xlsx)$/i);
                },
                'ppt': function(ext) {
                    return ext.match(/(ppt|pptx)$/i);
                },
                'zip': function(ext) {
                    return ext.match(/(zip|rar|tar|gzip|gz|7z)$/i);
                },
                'htm': function(ext) {
                    return ext.match(/(htm|html)$/i);
                },
                'txt': function(ext) {
                    return ext.match(/(txt|ini|csv|java|php|js|css)$/i);
                },
                'mov': function(ext) {
                    return ext.match(/(avi|mpg|mkv|mov|mp4|3gp|webm|wmv)$/i);
                },
                'mp3': function(ext) {
                    return ext.match(/(mp3|wav)$/i);
                }
            }
        });


    </script>
{% endblock %}
